{"type":"javascript","options":{},"name":"DragDown to Refesh 下拉刷新","version":"2","tags":["工具脚本"],"synopsis":"手机浏览器，下拉刷新，测试中","source":"(function(window) {\n    var refreshText = document.createElement('div');\n    refreshText.id = \"refreshText\";\n    refreshText.style.cssText = \"position: static; width: 100%; height: 0; left: 0; top: 0; background: #8ff0a4; opacity: 0; z-index: 999999;\";\n    document.body.insertAdjacentElement('afterbegin',refreshText);\n\n    const SENSITIVE = 300;//达到这个阈值才会刷新\n    var _element = document.body,\n        _refreshText = document.getElementById('refreshText'),\n        _startPos = 0,\n        _transitionHeight = 0,\n        _reloadFlag = 0;\n    _refreshText.style.maxHeight = SENSITIVE + 'px';\n    _element.addEventListener('touchstart', function(e) {\n        _startPos = e.touches[0].pageY;\n    }, false);\n    _element.addEventListener('touchmove', function(e) {\n        _transitionHeight = e.touches[0].pageY - _startPos;\n        _refreshText.style.height = _transitionHeight + 'px';\n        if (_transitionHeight > 10) {\n            if(_transitionHeight >= SENSITIVE){\n                _refreshText.style.opacity = 1;\n            }\n            switch(Math.ceil(_transitionHeight/50)){\n                case 0:\n                  _refreshText.style.opacity = 0;\n                break;\n                case 1:\n                  _refreshText.style.opacity = 0.2;\n                break;\n                case 2:\n                  _refreshText.style.opacity = 0.4;\n                break;\n                case 3:\n                  _refreshText.style.opacity = 0.6;\n                break;\n                case 4:\n                  _refreshText.style.opacity = 0.8;\n                break;\n                case 5:\n                  _refreshText.style.opacity = 1;\n                break;\n            };\n        }\n    }, false);\n    _element.addEventListener('touchend', function(e) {\n        if(_transitionHeight >= SENSITIVE){\n            location.reload();\n        } else {\n          _refreshText.style.height = 0;\n        }\n    }, false);\n})(window);","detail":"","build":"(function () {\n    'use strict';\n\n    (function(window) {\n        var refreshText = document.createElement('div');\n        refreshText.id = \"refreshText\";\n        refreshText.style.cssText = \"position: static; width: 100%; height: 0; left: 0; top: 0; background: #8ff0a4; opacity: 0; z-index: 999999;\";\n        document.body.insertAdjacentElement('afterbegin',refreshText);\n\n        const SENSITIVE = 300;\n        var _element = document.body,\n            _refreshText = document.getElementById('refreshText'),\n            _startPos = 0,\n            _transitionHeight = 0;\n        _refreshText.style.maxHeight = SENSITIVE + 'px';\n        _element.addEventListener('touchstart', function(e) {\n            _startPos = e.touches[0].pageY;\n        }, false);\n        _element.addEventListener('touchmove', function(e) {\n            _transitionHeight = e.touches[0].pageY - _startPos;\n            _refreshText.style.height = _transitionHeight + 'px';\n            if (_transitionHeight > 10) {\n                if(_transitionHeight >= SENSITIVE){\n                    _refreshText.style.opacity = 1;\n                }\n                switch(Math.ceil(_transitionHeight/50)){\n                    case 0:\n                      _refreshText.style.opacity = 0;\n                    break;\n                    case 1:\n                      _refreshText.style.opacity = 0.2;\n                    break;\n                    case 2:\n                      _refreshText.style.opacity = 0.4;\n                    break;\n                    case 3:\n                      _refreshText.style.opacity = 0.6;\n                    break;\n                    case 4:\n                      _refreshText.style.opacity = 0.8;\n                    break;\n                    case 5:\n                      _refreshText.style.opacity = 1;\n                    break;\n                }        }\n        }, false);\n        _element.addEventListener('touchend', function(e) {\n            if(_transitionHeight >= SENSITIVE){\n                location.reload();\n            } else {\n              _refreshText.style.height = 0;\n            }\n        }, false);\n    })();\n\n})();\n"}
